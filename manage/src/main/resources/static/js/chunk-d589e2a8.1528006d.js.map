{"version":3,"sources":["webpack:///./src/components/PersonalInfo.vue?5aa7","webpack:///./src/components/PersonalInfo.vue?6caa","webpack:///./src/components/PersonalInfo.vue?2bd3","webpack:///./src/components/PersonalInfo.vue?ad1b","webpack:///./src/components/PersonalInfo.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","title","attrs","on","select","userInfo","username","uId","phone","$event","dialogFormVisible","ref","password","model","value","callback","$$v","$set","expression","submit","form","rules","directives","name","rawName","staticStyle","domProps","target","composing","submitForm","slot","checkCode","staticRenderFns","code","validator","validatePhone","trigger","first","second","event","label","rule","pattern","message","test","Error","formName","$refs","validate","valid","bindPhone","String","sessionStorage","getItem","params","res","parseInt","$message","success","msg","error","reg","resetFields","length","resetForm","setTimeout","$router","go","console","log","data","component"],"mappings":"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","file":"js/chunk-d589e2a8.1528006d.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonalInfo.vue?vue&type=style&index=0&id=6bbd6c1c&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonalInfo.vue?vue&type=style&index=0&id=6bbd6c1c&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"info\"},[_c('h1',[_vm._v(_vm._s(_vm.title))]),_c('el-tabs',{attrs:{\"type\":\"border-card\"},on:{\"tab-click\":_vm.select}},[_c('el-tab-pane',{attrs:{\"label\":\"个人资料\"}},[_c('ul',[_c('li',{staticClass:\"item\"},[_c('span',[_vm._v(\"姓名\")]),_c('div',{staticClass:\"profile-input\"},[_c('span',{staticClass:\"input\",attrs:{\"type\":\"text\"}},[_vm._v(_vm._s(_vm.userInfo.username))])])]),_c('li',{staticClass:\"item\"},[_c('span',[_vm._v(\"学号\")]),_c('div',{staticClass:\"profile-input\"},[_c('span',{staticClass:\"input\",attrs:{\"type\":\"text\"}},[_vm._v(_vm._s(_vm.userInfo.uId))])])])])]),_c('el-tab-pane',{attrs:{\"label\":\"账号绑定\"}},[_c('ul',[_c('li',{staticClass:\"item\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"手机\")]),_c('div',{staticClass:\"input-box\"},[_c('span',{staticClass:\"account\"},[_vm._v(_vm._s(_vm.userInfo.phone))]),_c('div',{staticClass:\"action-box\"},[_c('button',{staticClass:\"btn link-btn\",on:{\"click\":function($event){_vm.dialogFormVisible = true}}},[_c('img',{staticClass:\"icon\",attrs:{\"src\":\"https://b-gold-cdn.xitu.io/v3/static/img/binding.07f72f8.svg\"}}),_c('span',[_vm._v(\"绑定\")])])])])])])]),_c('el-tab-pane',{attrs:{\"label\":\"修改密码\"}},[_c('el-form',{ref:\"pass\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.password,\"label-width\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":\"请输入新密码\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.password.first),callback:function ($$v) {_vm.$set(_vm.password, \"first\", $$v)},expression:\"password.first\"}})],1),_c('el-form-item',{attrs:{\"label\":\"请再次输入密码\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.password.second),callback:function ($$v) {_vm.$set(_vm.password, \"second\", $$v)},expression:\"password.second\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"修改密码\")])],1)],1)],1)],1),_c('el-dialog',{attrs:{\"title\":\"绑定手机号\",\"visible\":_vm.dialogFormVisible,\"width\":\"400px\"},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"prop\":\"phone\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\",\"placeholder\":\"请输入手机号码\"},model:{value:(_vm.form.phone),callback:function ($$v) {_vm.$set(_vm.form, \"phone\", $$v)},expression:\"form.phone\"}})],1),_c('div',{staticClass:\"code\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.code),expression:\"form.code\"}],staticClass:\"input\",staticStyle:{\"margin-left\":\"0\",\"font-size\":\"14px\"},attrs:{\"max\":\"6\",\"placeholder\":\"请输入6位验证码\"},domProps:{\"value\":(_vm.form.code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"code\", $event.target.value)}}}),_c('el-link',{attrs:{\"type\":\"primary\",\"underline\":false,\"title\":\"发送验证码\"},on:{\"click\":function($event){return _vm.submitForm('form')}}},[_vm._v(\"发送验证码\")])],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.checkCode}},[_vm._v(\"绑定手机\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue, Component } from 'vue-property-decorator';\nimport { setPageTitle } from '@/utils/utils';\nimport { bindPhone, checkCodeAndBind, getUserInfo, changePassword } from '@/http/api';\n\n@Component\nexport default class PersonalInfo extends Vue {\n\tprivate title: string = '个人资料';\n\tprivate dialogFormVisible: boolean = false;\n\tprivate form = {\n\t\tphone: '',\n\t\tcode: '',\n\t};\n\tprivate rules = {\n\t\tphone: [\n\t\t\t{ validator: this.validatePhone, trigger: 'blur' },\n\t\t],\n\t};\n\tprivate userInfo = {\n\t\tusername: '',\n\t\tuId: '',\n\t\tphone: '',\n\t};\n\tprivate password = {\n\t\tfirst: '',\n\t\tsecond: '',\n\t};\n\tpublic select(event: any) {\n\t\tthis.title = event.label;\n\t\tsetPageTitle(event.label);\n\t}\n\tpublic validatePhone(rule: any, value: string, callback: any): void {\n\t\tconst pattern = /^1[3-9]\\d{9}$/;\n\t\tconst message: string = '手机号码';\n\t\tif (!pattern.test(value)) {\n\t\t\tcallback(new Error('请输入正确格式的' + message));\n\t\t}\n\t\tcallback();\n\t}\n\tpublic submitForm(formName: string) {\n\t\t(this.$refs[formName] as any).validate((valid: any) => {\n\t\t\tif (valid) {\n\t\t\t\tthis.bindPhone();\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t}\n\tpublic async bindPhone() {\n\t\tconst uId: string = String(sessionStorage.getItem('uId'));\n\t\tconst params = {\n\t\t\tphone: this.form.phone,\n\t\t\tuId,\n\t\t};\n\t\tconst res = await bindPhone(params);\n\t\tparseInt(res.code, 10) === 1 ? this.$message.success(res.msg) : this.$message.error(res.msg);\n\t}\n\tpublic async checkCode() {\n\t\tconst reg = /^\\d{6}$/;\n\t\tthis.dialogFormVisible = false;\n\t\tif (!reg.test(this.form.code)) {\n\t\t\tthis.$message.error('请输入6为验证码！');\n\t\t\treturn;\n\t\t}\n\t\tconst uId: string = String(sessionStorage.getItem('uId'));\n\t\tconst params = {\n\t\t\tphone: this.form.phone,\n\t\t\tcode: this.form.code,\n\t\t\tuId,\n\t\t};\n\t\tconst res = await checkCodeAndBind(params);\n\t\tparseInt(res.code, 10) === 1 ? this.$message.success(res.msg) : this.$message.error(res.msg);\n\t}\n\tpublic resetForm(formName: string) {\n\t\t(this.$refs[formName] as any).resetFields();\n\t}\n\tpublic async submit() {\n\t\tif (this.password.first.length < 6) {\n\t\t\tthis.$message.error('密码长度不能小于6位！');\n\t\t\treturn;\n\t\t}\n\t\tif (this.password.first !== this.password.second) {\n\t\t\tthis.$message.error('两次密码输入不一致，请重新输入');\n\t\t\tthis.resetForm('pass');\n\t\t\treturn;\n\t\t}\n\t\tconst res = await changePassword({\n\t\t\tuId: this.userInfo.uId,\n\t\t\tpassword: this.password.second,\n\t\t});\n\t\tif (parseInt(res.code, 10) === 1) {\n\t\t\tthis.$message.success(res.msg);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.$router.go(0);\n\t\t\t}, 3000);\n\t\t} else {\n\t\t\tthis.$message.error(res.msg);\n\t\t\tthis.resetForm('pass');\n\t\t}\n\t\tconsole.log('pass: ', res);\n\t}\n \tpublic async created() {\n\t\tconst res = await getUserInfo();\n\t\tif (!res.data) {\n\t\t\treturn;\n\t\t}\n\t\tthis.userInfo = res.data[0];\n\t}\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonalInfo.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonalInfo.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PersonalInfo.vue?vue&type=template&id=6bbd6c1c&scoped=true&\"\nimport script from \"./PersonalInfo.vue?vue&type=script&lang=ts&\"\nexport * from \"./PersonalInfo.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PersonalInfo.vue?vue&type=style&index=0&id=6bbd6c1c&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6bbd6c1c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}