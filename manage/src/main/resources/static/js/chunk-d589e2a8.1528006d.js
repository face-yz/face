(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d589e2a8"],{"0ab3":function(e,t,s){"use strict";var r=s("db1b"),a=s.n(r);a.a},d7b9:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"info"},[s("h1",[e._v(e._s(e.title))]),s("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.select}},[s("el-tab-pane",{attrs:{label:"个人资料"}},[s("ul",[s("li",{staticClass:"item"},[s("span",[e._v("姓名")]),s("div",{staticClass:"profile-input"},[s("span",{staticClass:"input",attrs:{type:"text"}},[e._v(e._s(e.userInfo.username))])])]),s("li",{staticClass:"item"},[s("span",[e._v("学号")]),s("div",{staticClass:"profile-input"},[s("span",{staticClass:"input",attrs:{type:"text"}},[e._v(e._s(e.userInfo.uId))])])])])]),s("el-tab-pane",{attrs:{label:"账号绑定"}},[s("ul",[s("li",{staticClass:"item"},[s("span",{staticClass:"title"},[e._v("手机")]),s("div",{staticClass:"input-box"},[s("span",{staticClass:"account"},[e._v(e._s(e.userInfo.phone))]),s("div",{staticClass:"action-box"},[s("button",{staticClass:"btn link-btn",on:{click:function(t){e.dialogFormVisible=!0}}},[s("img",{staticClass:"icon",attrs:{src:"https://b-gold-cdn.xitu.io/v3/static/img/binding.07f72f8.svg"}}),s("span",[e._v("绑定")])])])])])])]),s("el-tab-pane",{attrs:{label:"修改密码"}},[s("el-form",{ref:"pass",staticClass:"demo-ruleForm",attrs:{model:e.password,"label-width":"150px"}},[s("el-form-item",{attrs:{label:"请输入新密码"}},[s("el-input",{attrs:{type:"password"},model:{value:e.password.first,callback:function(t){e.$set(e.password,"first",t)},expression:"password.first"}})],1),s("el-form-item",{attrs:{label:"请再次输入密码"}},[s("el-input",{attrs:{type:"password"},model:{value:e.password.second,callback:function(t){e.$set(e.password,"second",t)},expression:"password.second"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("修改密码")])],1)],1)],1)],1),s("el-dialog",{attrs:{title:"绑定手机号",visible:e.dialogFormVisible,width:"400px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[s("el-form-item",{attrs:{prop:"phone"}},[s("el-input",{attrs:{autocomplete:"off",placeholder:"请输入手机号码"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),s("div",{staticClass:"code"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.code,expression:"form.code"}],staticClass:"input",staticStyle:{"margin-left":"0","font-size":"14px"},attrs:{max:"6",placeholder:"请输入6位验证码"},domProps:{value:e.form.code},on:{input:function(t){t.target.composing||e.$set(e.form,"code",t.target.value)}}}),s("el-link",{attrs:{type:"primary",underline:!1,title:"发送验证码"},on:{click:function(t){return e.submitForm("form")}}},[e._v("发送验证码")])],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.checkCode}},[e._v("绑定手机")])],1)],1)],1)},a=[],n=(s("96cf"),s("3b8d")),i=s("d225"),o=s("b0b4"),c=s("308d"),l=s("6bb5"),u=s("4e2b"),p=s("9ab4"),d=s("60a3"),m=s("73ec"),f=s("1035"),b=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.title="个人资料",e.dialogFormVisible=!1,e.form={phone:"",code:""},e.rules={phone:[{validator:e.validatePhone,trigger:"blur"}]},e.userInfo={username:"",uId:"",phone:""},e.password={first:"",second:""},e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"select",value:function(e){this.title=e.label,Object(m["c"])(e.label)}},{key:"validatePhone",value:function(e,t,s){var r=/^1[3-9]\d{9}$/,a="手机号码";r.test(t)||s(new Error("请输入正确格式的"+a)),s()}},{key:"submitForm",value:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.bindPhone()}))}},{key:"bindPhone",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=String(sessionStorage.getItem("uId")),s={phone:this.form.phone,uId:t},e.next=4,Object(f["f"])(s);case 4:r=e.sent,1===parseInt(r.code,10)?this.$message.success(r.msg):this.$message.error(r.msg);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"checkCode",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,s,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=/^\d{6}$/,this.dialogFormVisible=!1,t.test(this.form.code)){e.next=5;break}return this.$message.error("请输入6为验证码！"),e.abrupt("return");case 5:return s=String(sessionStorage.getItem("uId")),r={phone:this.form.phone,code:this.form.code,uId:s},e.next=9,Object(f["h"])(r);case 9:a=e.sent,1===parseInt(a.code,10)?this.$message.success(a.msg):this.$message.error(a.msg);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"resetForm",value:function(e){this.$refs[e].resetFields()}},{key:"submit",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.password.first.length<6)){e.next=3;break}return this.$message.error("密码长度不能小于6位！"),e.abrupt("return");case 3:if(this.password.first===this.password.second){e.next=7;break}return this.$message.error("两次密码输入不一致，请重新输入"),this.resetForm("pass"),e.abrupt("return");case 7:return e.next=9,Object(f["g"])({uId:this.userInfo.uId,password:this.password.second});case 9:t=e.sent,1===parseInt(t.code,10)?(this.$message.success(t.msg),setTimeout((function(){s.$router.go(0)}),3e3)):(this.$message.error(t.msg),this.resetForm("pass")),console.log("pass: ",t);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"created",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["o"])();case 2:if(t=e.sent,t.data){e.next=5;break}return e.abrupt("return");case 5:this.userInfo=t.data[0];case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),t}(d["c"]);b=Object(p["a"])([d["a"]],b);var h=b,v=h,g=(s("0ab3"),s("2877")),w=Object(g["a"])(v,r,a,!1,null,"6bbd6c1c",null);t["default"]=w.exports},db1b:function(e,t,s){}}]);
//# sourceMappingURL=chunk-d589e2a8.1528006d.js.map