(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ce37ec2"],{"23b6":function(e,t,a){},7101:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{attrs:{stretch:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"管理员登录",name:"teacher"}},[a("LoginSelect",{attrs:{loginAuth:"teacher"}})],1),a("el-tab-pane",{attrs:{label:"学生登录",name:"student"}},[a("LoginSelect",{attrs:{loginAuth:"student"}})],1)],1)],1)},s=[],n=a("d225"),o=a("b0b4"),l=a("308d"),i=a("6bb5"),u=a("4e2b"),c=a("9ab4"),h=a("60a3"),m=a("73ec"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"status-icon":""}},[a("el-form-item",{attrs:{prop:"userName"}},[a("el-input",{staticClass:"input",attrs:{placeholder:/^teacher$/.test(e.auth)?"请输入11位手机号码":"请输入8位学号",maxlength:"11",clearable:""},model:{value:e.ruleForm.userName,callback:function(t){e.$set(e.ruleForm,"userName",t)},expression:"ruleForm.userName"}},[a("template",{slot:"prepend"},[a("i",{staticClass:"el-icon-user"})])],2)],1),e.isPhone?a("el-form-item",{attrs:{prop:"authCode"}},[a("el-row",[a("el-col",{attrs:{span:17}},[a("el-input",{staticClass:"input",attrs:{maxlength:"6",clearable:""},model:{value:e.ruleForm.authCode,callback:function(t){e.$set(e.ruleForm,"authCode",t)},expression:"ruleForm.authCode"}})],1),a("el-col",{attrs:{span:7}},[a("el-button",{staticClass:"input",attrs:{type:"primary"}},[e._v("\n\t\t\t\t\t\t获取验证码\n\t\t\t\t\t")])],1)],1)],1):a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{staticClass:"input",attrs:{clearable:"",placeholder:"密码","show-password":""},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}},[a("template",{slot:"prepend"},[a("i",{staticClass:"el-icon-lock"})])],2)],1),a("div",{staticClass:"other-login input"},[a("el-link",[e._v("忘记密码?")]),a("el-link",{on:{click:e.change}},[e._v(e._s(e.isPhone?"密码登录":"手机验证码登录"))])],1)],1),a("el-button",{staticClass:"input",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录")])],1)},p=[],b=(a("a481"),a("96cf"),a("3b8d")),v=a("1035"),f=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(l["a"])(this,Object(i["a"])(t).apply(this,arguments)),e.loginAuth="teacher",e.ruleForm={userName:"",password:"",authCode:0},e.rules={userName:[{validator:e.validateUserName,trigger:"blur"}],password:[{validator:e.validatePassword,trigger:"blur"}],authCode:[{validator:e.validateAuthCode,trigger:"blur"}]},e.isPhone=!1,e.activeName="teacher",e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"submitForm",value:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("no"),!1;t.login()}))}},{key:"validateUserName",value:function(e,t,a){var r="teacher"===this.auth?/^1[3-9]\d{9}$/:/^\d{8}$/,s="teacher"===this.auth?"手机号码":"学号";r.test(t)||a(new Error("请输入正确格式的"+s)),a()}},{key:"validatePassword",value:function(e,t,a){(t.length<6||t.length>20)&&a(new Error("格式错误，请输入长度为6~20位密码")),a()}},{key:"validateAuthCode",value:function(e,t,a){/^\d{6}$/.test(t)||a(new Error("请输入6为数字验证码")),a()}},{key:"change",value:function(){this.isPhone=!this.isPhone}},{key:"login",value:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("teacher"!==this.auth){e.next=6;break}return e.next=3,Object(v["o"])({username:this.ruleForm.userName,password:this.ruleForm.password});case 3:t=e.sent,e.next=9;break;case 6:return e.next=8,Object(v["n"])({uId:this.ruleForm.userName,password:this.ruleForm.password});case 8:t=e.sent;case 9:1===parseInt(t.code,10)?(localStorage.setItem("as_token",t.data[0].token),2===t.data.length&&(sessionStorage.setItem("uId",t.data[1].uId),sessionStorage.setItem("name",t.data[1].username)),localStorage.setItem("auth",this.auth),this.$router.replace("/".concat(this.auth))):this.$message.error(t.msg);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"auth",get:function(){return this.loginAuth}}]),t}(h["c"]);Object(c["a"])([Object(h["b"])({required:!0,validator:function(e){return-1!==["teacher","student"].indexOf(e)}})],f.prototype,"loginAuth",void 0),f=Object(c["a"])([h["a"]],f);var g=f,w=g,k=(a("956c"),a("2877")),O=Object(k["a"])(w,d,p,!1,null,"9cb8a1ca",null),j=O.exports,F=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(l["a"])(this,Object(i["a"])(t).apply(this,arguments)),e.activeName="teacher",e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"created",value:function(){Object(m["c"])("登录")}}]),t}(h["c"]);F=Object(c["a"])([Object(h["a"])({components:{LoginSelect:j}})],F);var C=F,y=C,N=(a("ebaf"),Object(k["a"])(y,r,s,!1,null,"76f2d146",null));t["default"]=N.exports},"956c":function(e,t,a){"use strict";var r=a("23b6"),s=a.n(r);s.a},9585:function(e,t,a){},ebaf:function(e,t,a){"use strict";var r=a("9585"),s=a.n(r);s.a}}]);
//# sourceMappingURL=chunk-3ce37ec2.fc654ce3.js.map